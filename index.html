<!DOCTYPE html>
<html lang="en">
	<head>
	    <meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	    <title>GitHub Profile Christmas Kit ğŸ„</title>

	    <!-- Favicons -->
	    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
	    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
	    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
	    <link rel="icon" href="assets/favicon/favicon.ico">
	    <link rel="manifest" href="assets/favicon/site.webmanifest">
	    
	    <!-- Google Fonts: Fredoka for that round, friendly look -->
	    <link rel="preconnect" href="https://fonts.googleapis.com">
	    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel Standalone -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Fredoka', 'sans-serif'],
                    },
                    colors: {
                        christmas: {
                            red: '#ef4444',
                            green: '#22c55e',
                            gold: '#fbbf24',
                            dark: '#0f172a',
                        }
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                        'glow-pulse': 'glowPulse 2s ease-in-out infinite',
                        'slideIn': 'slideIn 0.3s ease-out',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        glowPulse: {
                            '0%, 100%': { opacity: '1' },
                            '50%': { opacity: '0.7' },
                        },
                        slideIn: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #0f172a;
            color: #e2e8f0;
            overflow-x: hidden;
        }
        
        /* Glassmorphism Utilities */
        .glass-panel {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .glass-input {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .glass-input:focus {
            outline: none;
            border-color: rgba(34, 197, 94, 0.5);
            box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.2);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a; 
        }
        ::-webkit-scrollbar-thumb {
            background: #334155; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569; 
        }

        /* App Tooltip (fast + high-contrast) */
        @media (hover: hover) and (pointer: fine) {
            .app-tooltip[data-tooltip] {
                position: relative;
            }

            .app-tooltip[data-tooltip]::after {
                content: attr(data-tooltip);
                position: absolute;
                left: 50%;
                bottom: calc(100% + 10px);
                transform: translateX(-50%) translateY(6px) scale(0.98);
                padding: 8px 10px;
                border-radius: 14px;
                background: linear-gradient(180deg, rgba(15, 23, 42, 0.92), rgba(2, 6, 23, 0.92));
                border: 1px solid rgba(148, 163, 184, 0.35);
                box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.12), 0 18px 42px rgba(0, 0, 0, 0.55);
                color: rgba(248, 250, 252, 0.95);
                font-size: 12px;
                font-weight: 600;
                line-height: 1;
                white-space: nowrap;
                opacity: 0;
                pointer-events: none;
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                transition: opacity 90ms ease-out, transform 90ms ease-out;
                z-index: 80;
            }

            .app-tooltip[data-tooltip]::before {
                content: "";
                position: absolute;
                left: 50%;
                bottom: calc(100% + 6px);
                width: 10px;
                height: 10px;
                transform: translateX(-50%) translateY(6px) rotate(45deg);
                background: rgba(2, 6, 23, 0.92);
                border-right: 1px solid rgba(148, 163, 184, 0.35);
                border-bottom: 1px solid rgba(148, 163, 184, 0.35);
                opacity: 0;
                pointer-events: none;
                transition: opacity 90ms ease-out, transform 90ms ease-out;
                z-index: 79;
            }

            .app-tooltip[data-tooltip]:hover::after,
            .app-tooltip[data-tooltip]:focus-visible::after {
                opacity: 1;
                transform: translateX(-50%) translateY(0) scale(1);
            }

            .app-tooltip[data-tooltip]:hover::before,
            .app-tooltip[data-tooltip]:focus-visible::before {
                opacity: 1;
                transform: translateX(-50%) translateY(0) rotate(45deg);
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

	    <script type="text/babel">
	        const { useState, useEffect, useRef, useCallback, useMemo, useContext } = React;

	        // --- i18n (EN / ä¸­æ–‡) ---
		        const I18N_STRINGS = {
		            en: {
		                header: {
		                    desc: 'Christmas-only SVG icons for decorating your GitHub Profile README.',
		                    disclaimer: 'This kit does not generate full profile designs or README layouts.',
		                },
		                controls: {
		                    help: 'Help',
		                    language: 'Language',
		                    github: 'GitHub',
		                },
			                search: {
			                    placeholder: 'A wave of icons is on the wayâ€¦',
			                    clear: 'Clear',
			                    empty: 'No matching icons.',
			                },
						pagination: {
						    prev: 'Previous page',
						    next: 'Next page',
						    page: 'Page {current} / {total}',
						    pageNum: 'Go to page {page}',
						},
		                tooltip: {
		                    help: 'How to use',
		                    github: 'Open GitHub repo',
		                    guide: 'Contributing guide',
		                    visitors: 'Visitors',
		                    toggleLang: 'Switch language',
		                    langZh: 'ä¸­æ–‡',
		                    langEn: 'English',
		                    close: 'Close',
		                },
		                icons: {
		                    tree: 'Christmas Tree',
		                    gift: 'Gift Box',
		                    snowman: 'Snowman',
		                    stocking: 'Red Stocking',
		                    bell: 'Jingle Bell',
		                    candy: 'Candy Cane',
		                    hat: 'Santa Hat',
		                    wreath: 'Wreath',
		                    reindeer: 'Reindeer',
		                    snowflake: 'Snowflake',
		                },
		                iconCard: {
		                    copyMarkdown: 'Copy Markdown',
		                    copyUrl: 'Copy URL',
		                    copyHtml: 'Copy HTML',
		                    download: 'Download SVG',
		                },
	                formats: {
	                    markdown: 'Markdown',
	                    url: 'URL',
	                    html: 'HTML',
	                },
	                toast: {
	                    title: 'Notification',
	                    copied: 'Copied {what}!',
	                    downloaded: 'Downloaded SVG!',
	                    clipboardUnavailable: 'Clipboard unavailable. Try HTTPS / local server.',
	                    promptCopied: 'AI prompt copied!',
	                    templateCopied: 'Prompt template copied!',
	                    customDownloaded: 'Custom icon downloaded!',
	                },
		                usage: {
		                    title: 'Quick Start',
		                    subtitle: 'This site only provides Christmas-themed SVG icons for GitHub Profile READMEs.',
		                    subtitle2: 'It is not a full profile/README generator.',
		                    step1Title: 'Pick an icon & copy',
		                    step1Desc: 'Find an icon you like and copy the snippet (Markdown / URL / HTML) from its card.',
		                    step2Title: 'Install on your GitHub Profile',
		                    step2Desc: 'Open your GitHub Profile README (repo named <your-username>/<your-username>), paste it, commit, then refresh your profile.',
		                    gifSlot: 'GIF slot (Step {step})',
		                    tip: 'Tip: opening via file:// may block clipboard. Use HTTPS / local server.',
		                    gotIt: 'Got it',
		                },
		                lab: {
		                    beta: 'Beta',
		                    title: 'Contributor Lab',
		                    desc: 'Design your own icon or use AI to generate one, then test it here.',
		                    copyPrompt: 'Copy AI Prompt',
		                    inputLabel: 'SVG Path / Code',
		                    inputPlaceholder: 'Paste your <path> or full <svg> hereâ€¦',
		                    tip: 'Tip: Ensure viewBox is 0 0 64 64 for best results.',
		                    preview: 'Live Preview',
		                    download: 'Download',
		                    aiPrompt:
		                        `Create an animated SVG icon of a Santa Hat with viewBox="0 0 64 64" (transparent background). Style: bold, cute, and readable on a dark background.

Colors & structure:
- Red cap with a subtle vertical gradient (top #fb7185 â†’ bottom #ef4444), use a linearGradient id="hatRed"
- Soft white brim (rounded rect/path), optional light gray highlight line
- White pom-pom (circle) on the tip

Looping animations (repeatCount="indefinite"):
- Float the whole hat up/down with animateTransform translate: "0 0; 0 -2; 0 0" dur="1.6s"
- Slight tilt with animateTransform rotate around (32,44): "-3 32 44; 3 32 44; -3 32 44" dur="1.6s"
- Pom-pom bounce by animating its radius: "6; 6.6; 6" dur="1.6s"

Return only the SVG code (no markdown). Keep it self-contained (no external assets). To create other icons in the same style, replace â€œSanta Hatâ€ with another Christmas item.`,
		                },
		                footer: {
		                    builtWith: 'Built with React, Tailwind & Holiday Spirit ğŸ…',
		                    contributing: 'Contributing Guide',
		                },
		                legal: {
		                    line1: 'The contents of this website are',
		                    line2Prefix: 'Â© {year} under the terms of the',
		                    license: 'MIT License',
		                },
		                thanks: {
		                    prefix: 'Proudly hosted by',
		                    host: 'GitHub Pages',
		                    suffix: '',
		                    line2: 'Thanks to all contributors!',
		                },
		                starPrompt: {
		                    message: 'Open source takes time â€” if this kit helps, please consider starring the repo.',
		                    cta: 'Star on GitHub',
		                },
		                guide: {
		                    title: 'ğŸ„ Contributing Guide',
		                    back: 'Back to Kit',
		                    promptLabel: 'Prompt Template',
	                    copy: 'Copy',
	                },
	                common: {
	                    back: 'Back',
	                },
	            },
		            zh: {
		                header: {
		                    desc: 'ä»…æä¾›åœ£è¯èŠ‚ä¸»é¢˜ SVG å›¾æ ‡ï¼Œç”¨äºè£…ç‚¹ GitHub Profile READMEã€‚',
		                    disclaimer: 'æœ¬å·¥å…·ä¸æä¾›ä¸ªäººä¸»é¡µ/README çš„æ•´ä½“è®¾è®¡æˆ–ç”Ÿæˆã€‚',
		                },
		                controls: {
		                    help: 'ä½¿ç”¨å¸®åŠ©',
		                    language: 'è¯­è¨€',
		                    github: 'GitHub',
		                },
			                search: {
			                    placeholder: 'ä¸€å¤§æ³¢å›¾æ ‡æ­£åœ¨è·¯ä¸Š...',
			                    clear: 'æ¸…ç©º',
			                    empty: 'æ²¡æœ‰åŒ¹é…çš„å›¾æ ‡ã€‚',
			                },
						pagination: {
						    prev: 'ä¸Šä¸€é¡µ',
						    next: 'ä¸‹ä¸€é¡µ',
						    page: 'ç¬¬ {current} / {total} é¡µ',
						    pageNum: 'è·³è½¬åˆ°ç¬¬ {page} é¡µ',
						},
		                tooltip: {
		                    help: 'ä½¿ç”¨è¯´æ˜',
		                    github: 'æ‰“å¼€ GitHub ä»“åº“',
		                    guide: 'è´¡çŒ®æŒ‡å¼•',
		                    visitors: 'è®¿é—®é‡',
		                    toggleLang: 'åˆ‡æ¢è¯­è¨€',
		                    langZh: 'ä¸­æ–‡',
		                    langEn: 'English',
		                    close: 'å…³é—­',
		                },
		                icons: {
		                    tree: 'åœ£è¯æ ‘',
		                    gift: 'ç¤¼ç‰©ç›’',
		                    snowman: 'é›ªäºº',
		                    stocking: 'åœ£è¯è¢œ',
		                    bell: 'é“ƒé“›',
		                    candy: 'æ‹æ–ç³–',
		                    hat: 'åœ£è¯å¸½',
		                    wreath: 'èŠ±ç¯',
		                    reindeer: 'é©¯é¹¿',
		                    snowflake: 'é›ªèŠ±',
		                },
		                iconCard: {
		                    copyMarkdown: 'å¤åˆ¶ Markdown',
		                    copyUrl: 'å¤åˆ¶ URL',
		                    copyHtml: 'å¤åˆ¶ HTML',
		                    download: 'ä¸‹è½½ SVG',
		                },
	                formats: {
	                    markdown: 'Markdown',
	                    url: 'URL',
	                    html: 'HTML',
	                },
	                toast: {
	                    title: 'æç¤º',
	                    copied: 'å·²å¤åˆ¶ {what}ï¼',
	                    downloaded: 'å·²ä¸‹è½½ SVGï¼',
	                    clipboardUnavailable: 'å‰ªè´´æ¿ä¸å¯ç”¨ï¼Œè¯·ä½¿ç”¨ HTTPS / æœ¬åœ°æœåŠ¡ã€‚',
	                    promptCopied: 'å·²å¤åˆ¶ AI æç¤ºè¯ï¼',
	                    templateCopied: 'å·²å¤åˆ¶æç¤ºè¯æ¨¡æ¿ï¼',
	                    customDownloaded: 'å·²ä¸‹è½½è‡ªå®šä¹‰å›¾æ ‡ï¼',
	                },
		                usage: {
		                    title: 'ä½¿ç”¨è¯´æ˜',
		                    subtitle: 'æœ¬ç«™ä»…æä¾›åœ£è¯èŠ‚ä¸»é¢˜ SVG å›¾æ ‡ï¼Œç”¨äº GitHub Profile READMEã€‚',
		                    subtitle2: 'ä¸æ˜¯ä¸ªäººä¸»é¡µ/README çš„æ•´ä½“ç”Ÿæˆå™¨ã€‚',
		                    step1Title: 'é€‰æ‹©å›¾æ ‡å¹¶å¤åˆ¶',
		                    step1Desc: 'æ‰¾åˆ°ä½ å–œæ¬¢çš„å›¾æ ‡ï¼Œåœ¨å¡ç‰‡ä¸Šç‚¹å‡» Markdown / URL / HTML å®Œæˆå¤åˆ¶ã€‚',
		                    step2Title: 'æ‰“å¼€ GitHub ä¸ªäººä¸»é¡µå¹¶å®‰è£…',
		                    step2Desc: 'æ‰“å¼€ä½ çš„ GitHub Profile READMEï¼ˆä¸ç”¨æˆ·ååŒåä»“åº“çš„ READMEï¼‰ï¼Œç²˜è´´åæäº¤ä¿å­˜ï¼Œç„¶ååˆ·æ–°ä¸ªäººä¸»é¡µæŸ¥çœ‹æ•ˆæœã€‚',
		                    gifSlot: 'GIF å ä½ï¼ˆæ­¥éª¤ {step}ï¼‰',
		                    tip: 'æç¤ºï¼šç›´æ¥ç”¨ file:// æ‰“å¼€å¯èƒ½ç¦ç”¨å‰ªè´´æ¿ï¼Œå»ºè®® HTTPS / æœ¬åœ°æœåŠ¡ã€‚',
		                    gotIt: 'æˆ‘çŸ¥é“äº†',
		                },
		                lab: {
		                    beta: 'Beta',
		                    title: 'è´¡çŒ®è€…å®éªŒå®¤',
		                    desc: 'ä½ å¯ä»¥è‡ªå·±è®¾è®¡å›¾æ ‡ï¼Œæˆ–ç”¨ AI ç”Ÿæˆï¼Œç„¶ååœ¨è¿™é‡Œæµ‹è¯•é¢„è§ˆã€‚',
		                    copyPrompt: 'å¤åˆ¶ AI æç¤ºè¯',
		                    inputLabel: 'SVG Path / ä»£ç ',
		                    inputPlaceholder: 'ç²˜è´´ä½ çš„ <path> æˆ–å®Œæ•´ <svg> ä»£ç â€¦',
		                    tip: 'æç¤ºï¼šè¯·ç¡®ä¿ viewBox ä¸º 0 0 64 64ã€‚',
		                    preview: 'å®æ—¶é¢„è§ˆ',
		                    download: 'ä¸‹è½½',
		                    aiPrompt:
		                        `è¯·ç”Ÿæˆä¸€ä¸ªâ€œåœ£è¯å¸½ï¼ˆSanta Hatï¼‰â€çš„ SVG å°å›¾æ ‡ï¼ŒviewBox="0 0 64 64"ï¼Œé€æ˜èƒŒæ™¯ï¼Œé€‚åˆæš—è‰²èƒŒæ™¯å±•ç¤ºã€‚é£æ ¼è¦ç®€æ´å¯çˆ±ã€çº¿æ¡æ¸…æ™°ã€å½¢çŠ¶å¤§èƒ†ã€‚

é…è‰²ä¸ç»“æ„ï¼š
- å¸½èº«ä¸ºçº¢è‰²ï¼Œå¹¶å¸¦è½»å¾®çš„ç«–å‘æ¸å˜ï¼šé¡¶éƒ¨ #fb7185 â†’ åº•éƒ¨ #ef4444ï¼ˆlinearGradient id="hatRed"ï¼‰
- å¸½æªä¸ºæŸ”å’Œçš„ç™½è‰²ï¼ˆåœ†è§’çŸ©å½¢/è·¯å¾„ï¼‰ï¼Œå¯åŠ ä¸€æ¡æµ…ç°é«˜å…‰çº¿
- å¸½å°–æœ‰ä¸€ä¸ªç™½è‰²ç»’çƒï¼ˆcircleï¼‰

åŠ¨ç”»ï¼ˆå¾ªç¯æ’­æ”¾ repeatCount="indefinite"ï¼‰ï¼š
- æ•´ä½“ä¸Šä¸‹æ¼‚æµ®ï¼šanimateTransform translate å€¼ "0 0; 0 -2; 0 0"ï¼Œdur="1.6s"
- è½»å¾®å·¦å³æ‘‡æ‘†ï¼šanimateTransform rotate å›´ç»• (32,44) å€¼ "-3 32 44; 3 32 44; -3 32 44"ï¼Œdur="1.6s"
- ç»’çƒè½»å¾®å¼¹è·³ï¼šcircle çš„ r å€¼ "6; 6.6; 6"ï¼Œdur="1.6s"

è¯·åªè¿”å› SVG ä»£ç ï¼ˆä¸è¦ markdown åŒ…è£¹ï¼‰ï¼Œä¸è¦å¼•ç”¨å¤–éƒ¨èµ„æºï¼Œä¿æŒä»£ç ç®€æ´ã€‚æƒ³ç”Ÿæˆå…¶ä»–åŒé£æ ¼å›¾æ ‡ï¼ŒæŠŠâ€œåœ£è¯å¸½â€æ›¿æ¢ä¸ºå…¶ä»–åœ£è¯å…ƒç´ å³å¯ã€‚`,
		                },
		                footer: {
		                    builtWith: 'ç”± Reactã€Tailwind ä¸èŠ‚æ—¥çµæ„Ÿæ„å»º ğŸ…',
		                    contributing: 'å¦‚ä½•è´¡çŒ®',
		                },
		                legal: {
		                    line1: 'æœ¬ç½‘ç«™å†…å®¹',
		                    line2Prefix: 'Â© {year}ï¼Œéµå¾ª',
		                    license: 'MIT License',
		                },
		                thanks: {
		                    prefix: 'ç”±',
		                    host: 'GitHub Pages',
		                    suffix: 'æ‰˜ç®¡',
		                    line2: 'æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…ï¼',
		                },
		                starPrompt: {
		                    message: 'å¼€æºä¸æ˜“ï¼Œå¦‚æœä½ å–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œæ¬¢è¿ç‚¹ä¸ª Star æ”¯æŒä¸€ä¸‹ï½',
		                    cta: 'å» GitHub ç‚¹ Star',
		                },
		                guide: {
		                    title: 'ğŸ„ å¦‚ä½•è´¡çŒ®',
		                    back: 'è¿”å›å·¥å…·é¡µ',
		                    promptLabel: 'æç¤ºè¯æ¨¡æ¿',
	                    copy: 'å¤åˆ¶',
	                },
	                common: {
	                    back: 'è¿”å›',
	                },
	            },
	        };

	        const I18nContext = React.createContext({
	            lang: 'en',
	            setLang: () => {},
	            t: (key, vars) => key,
	        });

	        const getI18nValue = (lang, key) => {
	            const segments = key.split('.');
	            let current = I18N_STRINGS[lang];
	            for (const segment of segments) current = current?.[segment];
	            if (typeof current === 'string') return current;
	            return undefined;
	        };

	        const formatTemplate = (template, vars = {}) =>
	            template.replace(/\{(\w+)\}/g, (_, name) => (vars[name] ?? `{${name}}`));

		// --- Data: SVG Icon Manifest ---
		// Keep a built-in fallback so the page still works when opened via file://.
		// When served over HTTP(S), we try to load assets/icons.json for easier updates.
			const FALLBACK_ICON_MANIFEST = [
				{ id: 'tree', name: 'christmas-tree', labels: { en: 'Christmas Tree', zh: 'åœ£è¯æ ‘' } },
				{ id: 'gift', name: 'gift-box', labels: { en: 'Gift Box', zh: 'ç¤¼ç‰©ç›’' } },
				{ id: 'snowman', name: 'snowman', labels: { en: 'Snowman', zh: 'é›ªäºº' } },
				{ id: 'stocking', name: 'red-stocking', labels: { en: 'Red Stocking', zh: 'åœ£è¯è¢œ' } },
				{ id: 'bell', name: 'jingle-bell', labels: { en: 'Jingle Bell', zh: 'é“ƒé“›' } },
				{ id: 'candy', name: 'candy-cane', labels: { en: 'Candy Cane', zh: 'æ‹æ–ç³–' } },
				{ id: 'hat', name: 'santa-hat', labels: { en: 'Santa Hat', zh: 'åœ£è¯å¸½' } },
				{ id: 'wreath', name: 'wreath', labels: { en: 'Wreath', zh: 'èŠ±ç¯' } },
				{ id: 'reindeer', name: 'reindeer', labels: { en: 'Reindeer', zh: 'é©¯é¹¿' } },
				{ id: 'snowflake', name: 'snowflake', labels: { en: 'Snowflake', zh: 'é›ªèŠ±' } },
				{ id: 'santa', name: 'santa-face', labels: { en: 'Santa Face', zh: 'åœ£è¯è€äºº' } },
				{ id: 'elf', name: 'elf-hat', labels: { en: 'Elf Hat', zh: 'ç²¾çµå¸½' } },
				{ id: 'sleigh', name: 'sleigh', labels: { en: 'Sleigh', zh: 'é›ªæ©‡' } },
				{ id: 'mistletoe', name: 'mistletoe', labels: { en: 'Mistletoe', zh: 'æ§²å¯„ç”Ÿ' } },
				{ id: 'holly', name: 'holly-branch', labels: { en: 'Holly Branch', zh: 'å†¬é’æ' } },
				{ id: 'poinsettia', name: 'poinsettia', labels: { en: 'Poinsettia', zh: 'ä¸€å“çº¢' } },
				{ id: 'globe', name: 'snow-globe', labels: { en: 'Snow Globe', zh: 'é›ªèŠ±çƒ' } },
				{ id: 'candle', name: 'candle', labels: { en: 'Candle', zh: 'èœ¡çƒ›' } },
				{ id: 'lights', name: 'christmas-lights', labels: { en: 'Christmas Lights', zh: 'åœ£è¯ç¯ä¸²' } },
				{ id: 'ornament', name: 'ornament-ball', labels: { en: 'Ornament Ball', zh: 'æŒ‚é¥°çƒ' } },
				{ id: 'star', name: 'christmas-star', labels: { en: 'Christmas Star', zh: 'åœ£è¯æ˜Ÿ' } },
				{ id: 'gingerbread', name: 'gingerbread-man', labels: { en: 'Gingerbread Man', zh: 'å§œé¥¼äºº' } },
				{ id: 'mittens', name: 'mittens', labels: { en: 'Mittens', zh: 'æ‰‹å¥—' } },
				{ id: 'cocoa', name: 'hot-chocolate', labels: { en: 'Hot Chocolate', zh: 'çƒ­å·§å…‹åŠ›' } },
				{ id: 'bells', name: 'jingle-bells', labels: { en: 'Jingle Bells', zh: 'é“ƒé“›' } },
				{ id: 'house', name: 'snowy-house', labels: { en: 'Snowy House', zh: 'é›ªå±‹' } },
				{ id: 'lollipop', name: 'lollipop', labels: { en: 'Lollipop', zh: 'æ£’æ£’ç³–' } },
				{ id: 'calendar', name: 'advent-calendar', labels: { en: 'Advent Calendar', zh: 'é™ä¸´èŠ‚æ—¥å†' } },
				{ id: 'cracker', name: 'christmas-cracker', labels: { en: 'Christmas Cracker', zh: 'åœ£è¯æ‹‰ç‚®' } },
				{ id: 'bow', name: 'christmas-bow', labels: { en: 'Christmas Bow', zh: 'è´è¶ç»“' } },
				{ id: 'fireplace', name: 'fireplace', labels: { en: 'Fireplace', zh: 'å£ç‚‰' } },
				{ id: 'campfire', name: 'campfire', labels: { en: 'Campfire', zh: 'ç¯ç«' } },
				{ id: 'yule', name: 'yule-log', labels: { en: 'Yule Log', zh: 'åœ£è¯åŸæœ¨' } },
				{ id: 'ornament-red', name: 'ornament-red', labels: { en: 'Ornament (Red)', zh: 'çº¢è‰²è£…é¥°çƒ' } },
				{ id: 'ornament-green', name: 'ornament-green', labels: { en: 'Ornament (Green)', zh: 'ç»¿è‰²è£…é¥°çƒ' } },
				{ id: 'ornament-gold', name: 'ornament-gold', labels: { en: 'Ornament (Gold)', zh: 'é‡‘è‰²è£…é¥°çƒ' } },
				{ id: 'ornament-blue', name: 'ornament-blue', labels: { en: 'Ornament (Blue)', zh: 'è“è‰²è£…é¥°çƒ' } },
				{ id: 'ornament-purple', name: 'ornament-purple', labels: { en: 'Ornament (Purple)', zh: 'ç´«è‰²è£…é¥°çƒ' } },
				{ id: 'cookie', name: 'christmas-cookie', labels: { en: 'Christmas Cookie', zh: 'åœ£è¯æ›²å¥‡' } },
				{ id: 'carolers', name: 'carolers', labels: { en: 'Carolers', zh: 'åœ£è¯åˆå”±å›¢' } },
				{ id: 'heart', name: 'holiday-heart', labels: { en: 'Holiday Heart', zh: 'èŠ‚æ—¥çˆ±å¿ƒ' } },
				{ id: 'wand', name: 'magic-wand', labels: { en: 'Magic Wand', zh: 'é­”æ³•æ£’' } },
				{ id: 'emoji-hat', name: 'emoji-santa-hat', labels: { en: 'Smiley (Santa Hat)', zh: 'ç¬‘è„¸ï¼ˆåœ£è¯å¸½ï¼‰' } },
			];

		const ICONS_MANIFEST_URL = 'assets/icons.json';

        // --- Component: SnowEffect ---
        const SnowEffect = () => {
            const canvasRef = useRef(null);

            useEffect(() => {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                let width = window.innerWidth;
                let height = window.innerHeight;
                canvas.width = width;
                canvas.height = height;

                const particles = [];
                const particleCount = 100;

                for (let i = 0; i < particleCount; i++) {
                    particles.push({
                        x: Math.random() * width,
                        y: Math.random() * height,
                        r: Math.random() * 2 + 1,
                        d: Math.random() * particleCount,
                        speed: Math.random() * 0.5 + 0.2 // Falling speed
                    });
                }

                function draw() {
                    ctx.clearRect(0, 0, width, height);
                    ctx.fillStyle = "rgba(255, 255, 255, 0.6)";
                    ctx.beginPath();
                    for (let i = 0; i < particleCount; i++) {
                        const p = particles[i];
                        ctx.moveTo(p.x, p.y);
                        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2, true);
                    }
                    ctx.fill();
                    update();
                }

                let angle = 0;
                function update() {
                    angle += 0.01;
                    for (let i = 0; i < particleCount; i++) {
                        const p = particles[i];
                        // Move down and sway slightly
                        p.y += p.speed;
                        p.x += Math.sin(angle + p.d) * 0.5;

                        // Reset if out of view
                        if (p.x > width + 5 || p.x < -5 || p.y > height) {
                            if (i % 3 > 0) { // 2/3rds of the flakes
                                particles[i] = { x: Math.random() * width, y: -10, r: p.r, d: p.d, speed: p.speed };
                            } else {
                                // If the flake exits from the right
                                if (Math.sin(angle) > 0) {
                                    particles[i] = { x: -5, y: Math.random() * height, r: p.r, d: p.d, speed: p.speed };
                                } else {
                                    particles[i] = { x: width + 5, y: Math.random() * height, r: p.r, d: p.d, speed: p.speed };
                                }
                            }
                        }
                    }
                    requestAnimationFrame(draw);
                }

                draw();

                const handleResize = () => {
                    width = window.innerWidth;
                    height = window.innerHeight;
                    canvas.width = width;
                    canvas.height = height;
                };

                window.addEventListener('resize', handleResize);
                return () => window.removeEventListener('resize', handleResize);
            }, []);

            return <canvas ref={canvasRef} className="fixed top-0 left-0 w-full h-full pointer-events-none z-0" />;
        };

        // --- Component: ClickCheerEffect ---
        // Festive burst on pointer interactions (dark-mode friendly).
        const ClickCheerEffect = () => {
            const canvasRef = useRef(null);
            const animationIdRef = useRef(null);
            const particlesRef = useRef([]);
            const prefersReducedMotion = useRef(false);
	            const lastBurstAtRef = useRef(0);
	            const pendingBurstRef = useRef(null);
	            const cooldownTimerRef = useRef(null);

            useEffect(() => {
                prefersReducedMotion.current = window.matchMedia?.('(prefers-reduced-motion: reduce)')?.matches ?? false;
            }, []);

            useEffect(() => {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
	                const BURST_COOLDOWN_MS = 160;

                const resize = () => {
                    const dpr = Math.min(window.devicePixelRatio || 1, 2);
                    canvas.width = Math.floor(window.innerWidth * dpr);
                    canvas.height = Math.floor(window.innerHeight * dpr);
                    canvas.style.width = `${window.innerWidth}px`;
                    canvas.style.height = `${window.innerHeight}px`;
                    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
                };

                const colors = ['#ef4444', '#22c55e', '#fbbf24', 'rgba(248,250,252,0.95)'];

                const rand = (min, max) => Math.random() * (max - min) + min;

                const spawnBurst = (x, y) => {
                    if (prefersReducedMotion.current) return;

                    const count = 18 + Math.floor(Math.random() * 10);
                    for (let i = 0; i < count; i++) {
                        const angle = rand(0, Math.PI * 2);
                        const speed = rand(2.2, 6.2);
                        const typeRoll = Math.random();
                        const type =
                            typeRoll < 0.55 ? 'spark' :
                            typeRoll < 0.8 ? 'star' :
                            'flake';

                        particlesRef.current.push({
                            x,
                            y,
                            vx: Math.cos(angle) * speed,
                            vy: Math.sin(angle) * speed - rand(0.6, 2.0),
                            r: rand(2.2, 4.8),
                            rot: rand(0, Math.PI * 2),
                            vr: rand(-0.18, 0.18),
                            life: 0,
                            ttl: rand(520, 920),
                            color: colors[Math.floor(Math.random() * colors.length)],
                            type,
                        });
                    }

                    // Cap for performance
                    if (particlesRef.current.length > 260) {
                        particlesRef.current.splice(0, particlesRef.current.length - 260);
                    }
                };

                const drawStar = (cx, cy, spikes, outerR, innerR, rotation) => {
                    ctx.beginPath();
                    let rot = (Math.PI / 2) * 3 + rotation;
                    const step = Math.PI / spikes;
                    ctx.moveTo(cx, cy - outerR);
                    for (let i = 0; i < spikes; i++) {
                        ctx.lineTo(cx + Math.cos(rot) * outerR, cy + Math.sin(rot) * outerR);
                        rot += step;
                        ctx.lineTo(cx + Math.cos(rot) * innerR, cy + Math.sin(rot) * innerR);
                        rot += step;
                    }
                    ctx.closePath();
                };

                const drawFlake = (cx, cy, r, rotation) => {
                    ctx.save();
                    ctx.translate(cx, cy);
                    ctx.rotate(rotation);
                    ctx.beginPath();
                    ctx.moveTo(-r, 0);
                    ctx.lineTo(r, 0);
                    ctx.moveTo(0, -r);
                    ctx.lineTo(0, r);
                    ctx.moveTo(-r * 0.75, -r * 0.75);
                    ctx.lineTo(r * 0.75, r * 0.75);
                    ctx.moveTo(r * 0.75, -r * 0.75);
                    ctx.lineTo(-r * 0.75, r * 0.75);
                    ctx.stroke();
                    ctx.restore();
                };

                const tick = (time) => {
                    ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);

                    const now = performance.now();
                    const particles = particlesRef.current;
                    for (let i = particles.length - 1; i >= 0; i--) {
                        const p = particles[i];
                        p.life += 16.6; // approximate; good enough for visual effect

                        const t = Math.min(p.life / p.ttl, 1);
                        const alpha = (1 - t) * (1 - t);

                        p.vx *= 0.985;
                        p.vy = p.vy * 0.985 + 0.06; // gentle gravity
                        p.x += p.vx;
                        p.y += p.vy;
                        p.rot += p.vr;

                        ctx.save();
                        ctx.globalAlpha = alpha;
                        ctx.shadowColor = p.color;
                        ctx.shadowBlur = 10;

                        if (p.type === 'spark') {
                            ctx.fillStyle = p.color;
                            ctx.beginPath();
                            ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
                            ctx.fill();
                        } else if (p.type === 'star') {
                            ctx.fillStyle = p.color;
                            drawStar(p.x, p.y, 5, p.r * 1.6, p.r * 0.7, p.rot);
                            ctx.fill();
                        } else {
                            ctx.strokeStyle = p.color;
                            ctx.lineWidth = 1.4;
                            drawFlake(p.x, p.y, p.r * 1.5, p.rot);
                        }

                        ctx.restore();

                        if (t >= 1 || p.x < -50 || p.x > window.innerWidth + 50 || p.y > window.innerHeight + 80) {
                            particles.splice(i, 1);
                        }
                    }

                    // Keep animating while there are particles
                    if (particlesRef.current.length > 0) {
                        animationIdRef.current = requestAnimationFrame(tick);
                    } else {
                        animationIdRef.current = null;
                    }
                };

	                const runBurst = (x, y) => {
	                    spawnBurst(x, y);
	                    if (!animationIdRef.current) {
	                        animationIdRef.current = requestAnimationFrame(tick);
	                    }
	                };

	                const requestBurst = (x, y) => {
	                    const now = performance.now();
	                    const elapsed = now - lastBurstAtRef.current;
	                    if (elapsed >= BURST_COOLDOWN_MS) {
	                        lastBurstAtRef.current = now;
	                        runBurst(x, y);
	                        return;
	                    }

	                    pendingBurstRef.current = { x, y };
	                    if (cooldownTimerRef.current) return;
	                    const wait = Math.max(0, BURST_COOLDOWN_MS - elapsed);
	                    cooldownTimerRef.current = window.setTimeout(() => {
	                        cooldownTimerRef.current = null;
	                        const pending = pendingBurstRef.current;
	                        pendingBurstRef.current = null;
	                        if (!pending) return;
	                        lastBurstAtRef.current = performance.now();
	                        runBurst(pending.x, pending.y);
	                    }, wait);
	                };

                const onPointerDown = (e) => {
                    // Ignore right-click / non-primary
                    if (e.button != null && e.button !== 0) return;
	                    requestBurst(e.clientX, e.clientY);
                };

                resize();
                window.addEventListener('resize', resize);
                window.addEventListener('pointerdown', onPointerDown, { passive: true });

                return () => {
                    window.removeEventListener('resize', resize);
                    window.removeEventListener('pointerdown', onPointerDown);
	                    if (cooldownTimerRef.current) {
	                        window.clearTimeout(cooldownTimerRef.current);
	                        cooldownTimerRef.current = null;
	                    }
	                    pendingBurstRef.current = null;
                    if (animationIdRef.current) cancelAnimationFrame(animationIdRef.current);
                };
            }, []);

            return (
                <canvas
                    ref={canvasRef}
                    className="fixed inset-0 pointer-events-none z-20"
                    aria-hidden="true"
                />
            );
        };

		        // --- Component: Toast ---
		        const Toast = ({ message, isVisible, type = 'success' }) => {
		            const { t } = useContext(I18nContext);
		            if (!isVisible) return null;

		            return (
		                <div className={`fixed bottom-8 right-8 z-50 flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl glass-panel animate-[slideIn_0.3s_ease-out] border-l-4 ${type === 'success' ? 'border-green-500' : 'border-red-500'}`}>
		                    <div className={`p-2 rounded-full ${type === 'success' ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'}`}>
		                        {type === 'success' ? <i className="ph-fill ph-check-circle text-xl"></i> : <i className="ph-fill ph-warning-circle text-xl"></i>}
		                    </div>
		                    <div>
		                        <h4 className="font-semibold text-white text-sm">{t('toast.title')}</h4>
		                        <p className="text-slate-300 text-xs">{message}</p>
		                    </div>
		                </div>
		            );
		        };

		        // --- Component: CornerNotes ---
		        // Bottom license + thanks text (theme-matched).
			        const CornerNotes = ({ repoUrl }) => {
			            const { t, lang } = useContext(I18nContext);
			            const year = new Date().getFullYear();
			            const licenseUrl = `${repoUrl}/blob/main/LICENSE`;
			            const githubPagesUrl = 'https://pages.github.com/';

			            return (
			                <div className="pt-6 border-t border-slate-800/60">
			                    <div className="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-2 text-xs text-slate-500/90">
			                        <div className="leading-relaxed">
			                            <div>{t('legal.line1')}</div>
			                            <div>
		                                {t('legal.line2Prefix', { year })}{' '}
		                                <a
		                                    href={licenseUrl}
		                                    target="_blank"
		                                    rel="noreferrer"
		                                    className="text-slate-300 hover:text-white underline underline-offset-4"
		                                >
		                                    {t('legal.license')}
		                                </a>
		                                {lang === 'zh' ? 'ã€‚' : '.'}
		                            </div>
			                        </div>

			                        <div className="sm:text-right leading-relaxed">
			                            <div className="text-slate-400/90 mb-1">{t('footer.builtWith')}</div>
			                            <div>
			                                {t('thanks.prefix')}{' '}
			                                <a
			                                    href={githubPagesUrl}
		                                    target="_blank"
		                                    rel="noreferrer"
		                                    className="text-slate-300 hover:text-white underline underline-offset-4"
		                                >
		                                    {t('thanks.host')}
		                                </a>
		                                {t('thanks.suffix') ? ` ${t('thanks.suffix')}` : ''}
		                                {lang === 'zh' ? 'ã€‚' : '.'}
			                            </div>
			                            <div className="text-slate-400/90">{t('thanks.line2')}</div>
			                        </div>
			                    </div>
			                </div>
			            );
			        };

		        // --- Component: UsageModal ---
		        const UsageModal = ({ isOpen, onClose, baseUrl, repoUrl }) => {
		            const { t, lang } = useContext(I18nContext);

	            useEffect(() => {
	                if (!isOpen) return;

	                const onKeyDown = (e) => {
                    if (e.key === 'Escape') onClose();
                };

                window.addEventListener('keydown', onKeyDown);
                return () => window.removeEventListener('keydown', onKeyDown);
            }, [isOpen, onClose]);

            if (!isOpen) return null;

            return (
                <div className="fixed inset-0 z-[60] flex items-center justify-center p-4">
                    <div
                        className="absolute inset-0 bg-slate-950/70 backdrop-blur-sm"
                        onClick={onClose}
                        aria-hidden="true"
                    />
	                    <div className="relative w-full max-w-2xl glass-panel rounded-3xl p-6 md:p-8 border border-slate-700/50 shadow-2xl">
	                        <div className="flex items-start justify-between gap-4 mb-6">
	                            <div>
	                                <h2 className="text-xl md:text-2xl font-bold text-white">{t('usage.title')}</h2>
	                                <p className="text-slate-400 text-sm mt-1">
	                                    {t('usage.subtitle')} {t('usage.subtitle2')}
	                                </p>
	                            </div>
	                            <button
	                                type="button"
	                                onClick={onClose}
	                                className="app-tooltip p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-full transition-colors"
	                                aria-label={t('tooltip.close')}
	                                data-tooltip={t('tooltip.close')}
	                            >
	                                <i className="ph ph-x text-xl"></i>
	                            </button>
	                        </div>

		                        <div className="space-y-4 text-sm text-slate-300">
		                            <div className="flex gap-3">
		                                <div className="w-7 h-7 rounded-lg bg-green-500/15 text-green-300 flex items-center justify-center font-semibold shrink-0">1</div>
		                                <div className="flex-1">
			                                    <div className="text-white font-medium">{t('usage.step1Title')}</div>
			                                    <div className="text-slate-400">{t('usage.step1Desc')}</div>
			                                    <div className="mt-3 inline-flex max-w-full rounded-xl border border-slate-700/60 bg-slate-950/20 overflow-hidden">
			                                        <video
			                                            src="assets/mp4/github_christmas_kit_help_step1.mp4"
			                                            className="h-32 md:h-40 w-auto max-w-full object-contain bg-slate-950/30"
			                                            autoPlay
			                                            loop
			                                            muted
			                                            playsInline
			                                            preload="metadata"
			                                        />
			                                    </div>
			                                </div>
			                            </div>

			                            <div className="flex gap-3">
		                                <div className="w-7 h-7 rounded-lg bg-red-500/15 text-red-300 flex items-center justify-center font-semibold shrink-0">2</div>
		                                <div className="flex-1">
			                                    <div className="text-white font-medium">{t('usage.step2Title')}</div>
			                                    <div className="text-slate-400">{t('usage.step2Desc')}</div>
			                                    <div className="mt-3 inline-flex max-w-full rounded-xl border border-slate-700/60 bg-slate-950/20 overflow-hidden">
			                                        <video
			                                            src="assets/mp4/github_christmas_kit_help_step2.mp4"
			                                            className="h-32 md:h-40 w-auto max-w-full object-contain bg-slate-950/30"
			                                            autoPlay
			                                            loop
			                                            muted
			                                            playsInline
			                                            preload="metadata"
			                                        />
			                                    </div>
			                                </div>
			                            </div>

		                            <div className="text-xs text-slate-500">{t('usage.tip')}</div>
		                        </div>

	                        <div className="mt-6 flex justify-end">
	                            <button
	                                type="button"
	                                onClick={onClose}
	                                className="px-5 py-2.5 rounded-xl bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-medium shadow-lg shadow-green-500/20 transition-all active:scale-95"
	                            >
	                                {t('usage.gotIt')}
	                            </button>
	                        </div>
	                    </div>
	                </div>
	            );
	        };

			        // --- Component: IconCard ---
			        const IconCard = ({ icon, baseUrl, repoHomeUrl, onCopy, onCopySuccess }) => {
			            const { t, lang } = useContext(I18nContext);

		            const filePath = `assets/svg/${icon.name}.svg`;
		            const url = `${baseUrl.replace(/\/$/, '')}/${icon.name}.svg`;
		            						    const displayName =
						        icon.labels?.[lang] ||
						        icon.labels?.en ||
						        getI18nValue(lang, `icons.${icon.id}`) ||
						        getI18nValue('en', `icons.${icon.id}`) ||
						        icon.name.replace(/-/g, ' ');
		            const actions = [
		                { key: 'MARKDOWN', icon: 'ph ph-code-block', title: t('iconCard.copyMarkdown') },
		                { key: 'URL', icon: 'ph ph-link-simple', title: t('iconCard.copyUrl') },
		                { key: 'HTML', icon: 'ph ph-code', title: t('iconCard.copyHtml') },
	                { key: 'DOWNLOAD', icon: 'ph ph-download-simple', title: t('iconCard.download') },
	            ];

	            const handleAction = (action) => {
	                if (action === 'DOWNLOAD') {
	                    const link = document.createElement('a');
	                    link.href = filePath;
	                    link.download = `${icon.name}.svg`;
	                    link.click();
	                    onCopy(t('toast.downloaded'), 'success');
	                    return;
	                }

                let content = '';
                switch (action) {
                    case 'MARKDOWN':
                        content = `[![${icon.name}](${url})](${repoHomeUrl})`;
                        break;
                    case 'URL':
                        content = url;
                        break;
                    case 'HTML':
                        content = `<img src="${url}" alt="${icon.name}" width="64" />`;
                        break;
                    default:
                        return;
                }

	                if (!navigator.clipboard?.writeText) {
	                    onCopy(t('toast.clipboardUnavailable'), 'error');
	                    return;
	                }

		                navigator.clipboard.writeText(content)
		                    .then(() => {
		                        const what = t(`formats.${action.toLowerCase()}`);
		                        onCopy(t('toast.copied', { what }), 'success');
		                        if (onCopySuccess) onCopySuccess();
		                    })
		                    .catch(() => {
		                        onCopy(t('toast.clipboardUnavailable'), 'error');
		                    });
		            };

	            return (
	                <div className="group relative glass-panel rounded-2xl p-6 transition-all duration-300 hover:-translate-y-2 hover:shadow-[0_0_30px_rgba(34,197,94,0.15)] flex flex-col items-center">
	                    {/* Glow Effect */}
	                    <div className="absolute inset-0 bg-gradient-to-br from-green-500/10 to-red-500/10 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
	                    
	                    {/* Icon Preview */}
	                    <div className="relative w-24 h-24 mb-4 flex items-center justify-center drop-shadow-[0_0_15px_rgba(255,255,255,0.2)] transition-transform duration-300 group-hover:scale-110">
	                        <img src={filePath} alt={displayName} className="w-16 h-16 block" loading="lazy" />
	                    </div>
	                    
	                    <h3 className="relative text-white font-medium mb-4">{displayName}</h3>
	                    
	                    {/* Actions Grid */}
	                    <div className="relative w-full grid grid-cols-4 gap-2">
	                        {actions.map((item) => (
	                            <button
                                key={item.key}
                                type="button"
                                onClick={() => handleAction(item.key)}
                                className="app-tooltip h-10 flex items-center justify-center text-slate-300 bg-slate-800/50 hover:bg-slate-700/80 rounded-lg transition-colors border border-slate-700 hover:border-slate-500"
                                aria-label={item.title}
                                data-tooltip={item.title}
                            >
                                <i className={`${item.icon} text-lg`}></i>
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

	        // --- Component: LabSection ---
		        const LabSection = ({ onCopy }) => {
		            const { t } = useContext(I18nContext);

				            const [customCode, setCustomCode] = useState(() => `<!-- Demo: assets/svg/santa-hat.svg (shows source here) -->
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="64" height="64" role="img" aria-label="Santa hat">
  <defs>
    <linearGradient id="hatRed" x1="0" y1="14" x2="0" y2="52">
      <stop offset="0" stop-color="#fb7185"/>
      <stop offset="1" stop-color="#ef4444"/>
    </linearGradient>
  </defs>

  <!-- Float + tilt (looping) -->
  <g>
    <animateTransform attributeName="transform" type="translate" values="0 0; 0 -2; 0 0" dur="1.6s" repeatCount="indefinite" />
    <g transform-origin="32 44">
      <animateTransform attributeName="transform" type="rotate" values="-3 32 44; 3 32 44; -3 32 44" dur="1.6s" repeatCount="indefinite" />

      <!-- Cap -->
      <path
        d="M14 44C16 26 30 14 44 18C54 21 56 35 48 41C41 45 34 40 26 46C21 50 16 48 14 44Z"
        fill="url(#hatRed)"
        stroke="#fff"
        stroke-width="1.6"
        stroke-linejoin="round"
      />

      <!-- Brim -->
      <rect x="12" y="42" width="40" height="10" rx="5" fill="#fff" opacity="0.95" />
      <path d="M14 47H50" stroke="#e2e8f0" stroke-width="1.4" stroke-linecap="round" opacity="0.6" />

      <!-- Pom-pom (bounce) -->
      <circle cx="50" cy="34" r="6" fill="#fff" opacity="0.96">
        <animate attributeName="r" values="6;6.6;6" dur="1.6s" repeatCount="indefinite" />
      </circle>
      <circle cx="48" cy="32" r="2" fill="#e2e8f0" opacity="0.6">
        <animate attributeName="r" values="2;2.3;2" dur="1.6s" repeatCount="indefinite" />
      </circle>
    </g>
  </g>
</svg>`);
		            const aiPrompt = t('lab.aiPrompt');

	            const copyPrompt = () => {
	                if (!navigator.clipboard?.writeText) {
	                    onCopy(t('toast.clipboardUnavailable'), 'error');
	                    return;
	                }

	                navigator.clipboard.writeText(aiPrompt)
	                    .then(() => onCopy(t('toast.promptCopied'), 'success'))
	                    .catch(() => onCopy(t('toast.clipboardUnavailable'), 'error'));
	            };

            const downloadCustom = () => {
                const fullSvg = customCode.includes('<svg') ? customCode : `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="64" height="64">${customCode}</svg>`;
                const blob = new Blob([fullSvg], { type: 'image/svg+xml' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
	                link.href = url;
	                link.download = `custom-christmas-icon.svg`;
	                link.click();
	                onCopy(t('toast.customDownloaded'), 'success');
	            };

	            return (
	                <div className="glass-panel rounded-3xl p-8 mt-16 border border-indigo-500/30 shadow-[0_0_50px_rgba(79,70,229,0.1)]">
	                    <div className="flex flex-col md:flex-row items-start justify-between mb-8 gap-4">
	                        <div>
	                            <div className="flex items-center gap-2 mb-2">
	                                <span className="bg-indigo-500 text-white text-xs px-2 py-0.5 rounded-full">{t('lab.beta')}</span>
	                                <h2 className="text-2xl font-bold text-white">{t('lab.title')}</h2>
	                            </div>
	                            <p className="text-slate-400">{t('lab.desc')}</p>
	                        </div>
	                        <button 
	                            onClick={copyPrompt}
	                            className="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded-xl shadow-lg shadow-indigo-500/20 transition-all active:scale-95"
	                        >
	                            <i className="ph ph-magic-wand text-lg"></i>
	                            <span>{t('lab.copyPrompt')}</span>
	                        </button>
	                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
	                        {/* Input Area */}
	                        <div className="space-y-4">
	                            <label className="block text-sm font-medium text-slate-300">{t('lab.inputLabel')}</label>
	                            <textarea
	                                value={customCode}
	                                onChange={(e) => setCustomCode(e.target.value)}
	                                className="w-full h-48 glass-input rounded-xl p-4 font-mono text-sm text-green-300 resize-none focus:ring-2 focus:ring-indigo-500/50"
	                                placeholder={t('lab.inputPlaceholder')}
	                            />
	                            <p className="text-xs text-slate-500">{t('lab.tip')}</p>
	                        </div>

	                        {/* Preview Area */}
	                        <div className="flex flex-col items-center justify-center bg-slate-800/50 rounded-xl border border-slate-700 border-dashed p-8 relative">
		                             <div className="mb-4 text-sm text-slate-400">{t('lab.preview')}</div>
		                             <div 
		                                className="w-full max-w-md flex items-center justify-center drop-shadow-[0_0_20px_rgba(255,255,255,0.1)] [&_svg]:w-56 [&_svg]:h-56 md:[&_svg]:w-72 md:[&_svg]:h-72"
		                                dangerouslySetInnerHTML={{ 
	                                    __html: customCode.includes('<svg') ? customCode : `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="128" height="128">${customCode}</svg>`
	                                }} 
		                             />
	                             <button 
	                                onClick={downloadCustom}
	                                className="mt-8 px-6 py-2 bg-slate-700 hover:bg-white hover:text-slate-900 text-white rounded-full transition-all flex items-center gap-2"
	                             >
	                                <i className="ph ph-download-simple"></i>
	                                {t('lab.download')}
	                             </button>
	                        </div>
	                    </div>
	                </div>
            );
        };

        // --- Component: ContributingGuide ---
        const ContributingGuide = ({ onBack, onCopy }) => {
            const { t, lang } = useContext(I18nContext);
            const promptTemplate =
                lang === 'zh'
                    ? `è¯·ç”Ÿæˆä¸€ä¸ªâ€œåœ£è¯å¸½ï¼ˆSanta Hatï¼‰â€çš„ SVG å°å›¾æ ‡ï¼ŒviewBox="0 0 64 64"ï¼Œé€æ˜èƒŒæ™¯ï¼Œé€‚åˆæš—è‰²èƒŒæ™¯å±•ç¤ºã€‚é£æ ¼è¦ç®€æ´å¯çˆ±ã€çº¿æ¡æ¸…æ™°ã€å½¢çŠ¶å¤§èƒ†ã€‚

é…è‰²ä¸ç»“æ„ï¼š
- å¸½èº«ä¸ºçº¢è‰²ï¼Œå¹¶å¸¦è½»å¾®çš„ç«–å‘æ¸å˜ï¼šé¡¶éƒ¨ #fb7185 â†’ åº•éƒ¨ #ef4444ï¼ˆlinearGradient id="hatRed"ï¼‰
- å¸½æªä¸ºæŸ”å’Œçš„ç™½è‰²ï¼ˆåœ†è§’çŸ©å½¢/è·¯å¾„ï¼‰ï¼Œå¯åŠ ä¸€æ¡æµ…ç°é«˜å…‰çº¿
- å¸½å°–æœ‰ä¸€ä¸ªç™½è‰²ç»’çƒï¼ˆcircleï¼‰

åŠ¨ç”»ï¼ˆå¾ªç¯æ’­æ”¾ repeatCount="indefinite"ï¼‰ï¼š
- æ•´ä½“ä¸Šä¸‹æ¼‚æµ®ï¼šanimateTransform translate å€¼ "0 0; 0 -2; 0 0"ï¼Œdur="1.6s"
- è½»å¾®å·¦å³æ‘‡æ‘†ï¼šanimateTransform rotate å›´ç»• (32,44) å€¼ "-3 32 44; 3 32 44; -3 32 44"ï¼Œdur="1.6s"
- ç»’çƒè½»å¾®å¼¹è·³ï¼šcircle çš„ r å€¼ "6; 6.6; 6"ï¼Œdur="1.6s"

è¯·åªè¿”å› SVG ä»£ç ï¼ˆä¸è¦ markdown åŒ…è£¹ï¼‰ï¼Œä¸è¦å¼•ç”¨å¤–éƒ¨èµ„æºï¼Œä¿æŒä»£ç ç®€æ´ã€‚æƒ³ç”Ÿæˆå…¶ä»–åŒé£æ ¼å›¾æ ‡ï¼ŒæŠŠâ€œåœ£è¯å¸½â€æ›¿æ¢ä¸ºå…¶ä»–åœ£è¯å…ƒç´ å³å¯ã€‚`
                    : `Create an animated SVG icon of a Santa Hat with viewBox="0 0 64 64" (transparent background). Style: bold, cute, and readable on a dark background.

Colors & structure:
- Red cap with a subtle vertical gradient (top #fb7185 â†’ bottom #ef4444), use a linearGradient id="hatRed"
- Soft white brim (rounded rect/path), optional light gray highlight line
- White pom-pom (circle) on the tip

Looping animations (repeatCount="indefinite"):
- Float the whole hat up/down with animateTransform translate: "0 0; 0 -2; 0 0" dur="1.6s"
- Slight tilt with animateTransform rotate around (32,44): "-3 32 44; 3 32 44; -3 32 44" dur="1.6s"
- Pom-pom bounce by animating its radius: "6; 6.6; 6" dur="1.6s"

Return only the SVG code (no markdown). Keep it self-contained (no external assets). To create other icons in the same style, replace â€œSanta Hatâ€ with another Christmas item.`;

            const handleCopy = () => {
                if (!navigator.clipboard?.writeText) {
                    onCopy(t('toast.clipboardUnavailable'), 'error');
                    return;
                }

                navigator.clipboard.writeText(promptTemplate)
                    .then(() => onCopy(t('toast.templateCopied'), 'success'))
                    .catch(() => onCopy(t('toast.clipboardUnavailable'), 'error'));
            };

            return (
                <div className="max-w-4xl mx-auto animate-slideIn pb-20">
                    <button 
                        onClick={onBack}
                        className="mb-8 flex items-center gap-2 text-slate-400 hover:text-white transition-colors group"
                    >
                        <i className="ph ph-arrow-left group-hover:-translate-x-1 transition-transform"></i> 
                        {t('guide.back')}
                    </button>

                    <div className="glass-panel p-8 md:p-12 rounded-3xl relative overflow-hidden">
                        {/* Decorative background glow */}
                        <div className="absolute top-0 right-0 w-64 h-64 bg-green-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>

                        <h1 className="text-3xl md:text-4xl font-bold text-white mb-6">{t('guide.title')}</h1>

                        {lang === 'zh' ? (
                            <>
                                <p className="text-slate-300 text-lg mb-8 leading-relaxed">
                                    éå¸¸æ„Ÿè°¢ä½ æœ‰å…´è¶£ä¸º Christmas Icons Kit åšå‡ºè´¡çŒ®ï¼è¿™ä¸ªé¡¹ç›®ç”±ç¤¾åŒºé©±åŠ¨ï¼Œæˆ‘ä»¬éå¸¸æ¬¢è¿ä½ æäº¤æ–°çš„å›¾æ ‡ã€‚
                                    æˆ‘ä»¬é¼“åŠ±ä½¿ç”¨ AI å·¥å…·ï¼ˆå¦‚ ChatGPT, Gemini, Midjourney ç­‰ï¼‰æ¥è¾…åŠ©åˆ›ä½œï¼Œç„¶åæäº¤ Pull Requestã€‚
                                </p>

                                <div className="space-y-12">
                                    {/* Section 1 */}
                                    <section>
                                        <h2 className="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                                            <span className="bg-indigo-500/20 text-indigo-400 p-2 rounded-lg text-xl">ğŸš€</span>
                                            å¿«é€Ÿä¸Šæ‰‹ï¼šAI è¾…åŠ©è´¡çŒ®æµç¨‹
                                        </h2>
                                        <p className="text-slate-400 mb-6">å³ä½¿ä½ ä¸ä¼šç”»ç”»ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤åœ¨ 5 åˆ†é’Ÿå†…è´¡çŒ®ä¸€ä¸ªå›¾æ ‡ï¼</p>

                                        <div className="pl-4 border-l-2 border-slate-700 space-y-8">
                                            {/* Step 1 */}
                                            <div>
                                                <h3 className="text-xl font-semibold text-white mb-3">ç¬¬ä¸€æ­¥ï¼šç”Ÿæˆ SVG</h3>
                                                <p className="text-slate-400 mb-4">ä½¿ç”¨æˆ‘ä»¬æä¾›çš„æ ‡å‡†æç¤ºè¯ï¼Œå‘ç»™ä½ çš„ AI åŠ©æ‰‹ï¼ˆæ¨èä½¿ç”¨ Gemini æˆ– ChatGPTï¼‰ã€‚</p>
                                                <div className="bg-slate-900/50 rounded-xl p-4 border border-slate-700/50 relative group">
                                                    <div className="flex justify-between items-center mb-2">
                                                        <p className="text-xs text-slate-500 font-mono uppercase tracking-wider">{t('guide.promptLabel')}</p>
                                                        <button 
                                                            onClick={handleCopy}
                                                            className="text-xs flex items-center gap-1 text-slate-400 hover:text-white transition-colors"
                                                        >
                                                            <i className="ph ph-copy"></i> {t('guide.copy')}
                                                        </button>
                                                    </div>
                                                    <code className="block font-mono text-sm text-green-300 mb-4 break-words whitespace-pre-wrap">{promptTemplate}</code>
	                                                    <p className="text-xs text-slate-500">ï¼ˆè¿™æ˜¯â€œåœ£è¯å¸½â€çš„ç¤ºä¾‹æç¤ºè¯ï¼šä½ ä¹Ÿå¯ä»¥æŠŠâ€œåœ£è¯å¸½â€æ›¿æ¢æˆå…¶ä»–åœ£è¯å…ƒç´ ï¼Œä¿æŒåŒé£æ ¼è¾“å‡ºã€‚ï¼‰</p>
	                                                </div>
	                                            </div>

                                            {/* Step 2 */}
                                            <div>
                                                <h3 className="text-xl font-semibold text-white mb-3">ç¬¬äºŒæ­¥ï¼šæµ‹è¯•ä¸é¢„è§ˆ</h3>
                                                <ul className="list-disc list-inside text-slate-400 space-y-2">
                                                    <li>æ‰“å¼€æˆ‘ä»¬çš„é¡¹ç›®ä¸»é¡µï¼ˆä½ æœ¬åœ°è¿è¡Œçš„ index.html æˆ–è€…åœ¨çº¿ Demoï¼‰ã€‚</li>
                                                    <li>æ»šåŠ¨åˆ°åº•éƒ¨çš„ <span className="text-white font-medium">â€œğŸ§ª è´¡çŒ®è€…å®éªŒå®¤â€</span>ã€‚</li>
                                                    <li>æŠŠ AI ç”Ÿæˆçš„ä»£ç ç²˜è´´è¿›å»ã€‚</li>
                                                    <li>è§‚å¯Ÿé¢„è§ˆæ•ˆæœï¼š
                                                        <ul className="pl-6 pt-1 space-y-1 list-[circle]">
                                                            <li>å›¾æ ‡æ˜¯å¦æ¸…æ™°ï¼Ÿ</li>
                                                            <li>æ˜¯å¦æœ‰èƒŒæ™¯è‰²ï¼Ÿï¼ˆåº”è¯¥æ˜¯é€æ˜çš„ï¼‰</li>
                                                            <li>é¢œè‰²æ˜¯å¦ç¬¦åˆèŠ‚æ—¥æ°”æ°›ï¼Ÿ</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </div>

                                            {/* Step 3 */}
                                            <div>
                                                <h3 className="text-xl font-semibold text-white mb-3">ç¬¬ä¸‰æ­¥ï¼šæäº¤ PR</h3>
                                                <ul className="list-disc list-inside text-slate-400 space-y-2">
                                                    <li>åœ¨å®éªŒå®¤ä¸­ç‚¹å‡» â€œä¸‹è½½ .svgâ€ï¼Œå¹¶ç»™æ–‡ä»¶èµ·ä¸ªå¥½åå­—ï¼ˆè‹±æ–‡ï¼Œä¾‹å¦‚ santa-hat.svgï¼‰ã€‚</li>
                                                    <li>Fork æœ¬ä»“åº“ã€‚</li>
                                                    <li>å°†ä¸‹è½½çš„ SVG æ–‡ä»¶æ”¾å…¥ <code className="bg-slate-800 px-1 rounded text-sm text-indigo-300">assets/svg/</code> æ–‡ä»¶å¤¹ã€‚</li>
                                                    <li>ï¼ˆå¯é€‰ï¼‰åœ¨ <code className="bg-slate-800 px-1 rounded text-sm text-indigo-300">assets/icons.json</code> ä¸­è¡¥å……ä½ çš„å›¾æ ‡ä¿¡æ¯ï¼ˆå¦‚æœä¸ç†Ÿæ‚‰ä»£ç ï¼Œåªéœ€æäº¤ SVG æ–‡ä»¶ï¼Œç»´æŠ¤è€…ä¼šå¸®ä½ æ·»åŠ ï¼‰ã€‚</li>
                                                    <li>æäº¤ Pull Requestï¼</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </section>

                                    {/* Section 2 */}
                                    <section>
                                        <h2 className="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                                            <span className="bg-red-500/20 text-red-400 p-2 rounded-lg text-xl">ğŸ“</span>
                                            å›¾æ ‡è§„èŒƒ
                                        </h2>
                                        <p className="text-slate-400 mb-6">ä¸ºäº†ä¿æŒé£æ ¼ç»Ÿä¸€ï¼Œè¯·éµå¾ªä»¥ä¸‹è§„èŒƒï¼š</p>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            {[
                                                { label: 'æ ¼å¼', value: 'æ ‡å‡† SVG' },
                                                { label: 'å°ºå¯¸', value: 'ViewBox å¿…é¡»æ˜¯ 0 0 64 64' },
                                                { label: 'é£æ ¼', value: 'æ‰å¹³åŒ– (Flat)ï¼Œåƒç´ é£ (Pixel)ï¼Œæˆ–æç®€çº¿æ¡ (Minimal Line)' },
                                                { label: 'èƒŒæ™¯', value: 'å¿…é¡»æ˜¯é€æ˜èƒŒæ™¯' },
                                                { label: 'é¢œè‰²', value: 'æ¨èä½¿ç”¨ Tailwind CSS æ ‡å‡†è‰²ç›˜ä¸­çš„çº¢è‰² (#ef4444, #dc2626)ã€ç»¿è‰² (#22c55e, #15803d) å’Œç™½è‰²ã€‚' },
                                            ].map((item, idx) => (
                                                <div key={idx} className="bg-slate-800/30 p-4 rounded-xl border border-slate-700/30">
                                                    <span className="block text-slate-500 text-xs mb-1 uppercase tracking-wider">{item.label}</span>
                                                    <span className="text-white font-medium text-sm">{item.value}</span>
                                                </div>
                                            ))}
                                        </div>
                                    </section>
                                </div>
                            </>
                        ) : (
                            <>
                                <p className="text-slate-300 text-lg mb-8 leading-relaxed">
                                    Thanks for contributing! Add new Christmas icons by submitting a Pull Request.
                                </p>

                                <div className="space-y-12">
                                    <section>
                                        <h2 className="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                                            <span className="bg-indigo-500/20 text-indigo-400 p-2 rounded-lg text-xl">ğŸš€</span>
                                            Quick start
                                        </h2>

                                        <div className="pl-4 border-l-2 border-slate-700 space-y-6">
                                            <div>
                                                <div className="text-white font-semibold mb-2">1) Generate an SVG</div>
                                                <p className="text-slate-400">
                                                    Use this prompt with your AI tool (or draw it yourself). Keep it minimal and readable at small sizes.
                                                </p>
                                            </div>

                                            <div className="bg-slate-900/50 rounded-xl p-4 border border-slate-700/50 relative group">
                                                <div className="flex justify-between items-center mb-2">
                                                    <p className="text-xs text-slate-500 font-mono uppercase tracking-wider">{t('guide.promptLabel')}</p>
                                                    <button 
                                                        onClick={handleCopy}
                                                        className="text-xs flex items-center gap-1 text-slate-400 hover:text-white transition-colors"
                                                    >
                                                        <i className="ph ph-copy"></i> {t('guide.copy')}
                                                    </button>
                                                </div>
                                                <code className="block font-mono text-sm text-green-300 break-words whitespace-pre-wrap">{promptTemplate}</code>
                                            </div>

                                            <div>
                                                <div className="text-white font-semibold mb-2">2) Add the file</div>
                                                <p className="text-slate-400">
                                                    Put your SVG into <code className="bg-slate-800/60 px-1.5 py-0.5 rounded">assets/svg/</code> (kebab-case name).
                                                </p>
                                            </div>

                                            <div>
                                                <div className="text-white font-semibold mb-2">3) Open a PR</div>
                                                <p className="text-slate-400">
                                                    Optionally add the icon entry to <code className="bg-slate-800/60 px-1.5 py-0.5 rounded">assets/icons.json</code> (icon manifest) so it shows up in the grid and search.
                                                </p>
                                            </div>
                                        </div>
                                    </section>

                                    <section>
                                        <h2 className="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                                            <span className="bg-red-500/20 text-red-400 p-2 rounded-lg text-xl">ğŸ“</span>
                                            Icon guidelines
                                        </h2>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            {[
                                                { label: 'Format', value: 'SVG' },
                                                { label: 'Size', value: 'viewBox must be 0 0 64 64' },
                                                { label: 'Style', value: 'Flat / Pixel / Minimal line' },
                                                { label: 'Background', value: 'Transparent' },
                                                { label: 'Colors', value: 'Prefer red (#ef4444), green (#22c55e), white' },
                                            ].map((item, idx) => (
                                                <div key={idx} className="bg-slate-800/30 p-4 rounded-xl border border-slate-700/30">
                                                    <span className="block text-slate-500 text-xs mb-1 uppercase tracking-wider">{item.label}</span>
                                                    <span className="text-white font-medium text-sm">{item.value}</span>
                                                </div>
                                            ))}
                                        </div>
                                    </section>
                                </div>
                            </>
                        )}

                        <div className="mt-12 pt-8 border-t border-slate-700 text-center">
                            <p className="text-slate-400">{lang === 'zh' ? 'å†æ¬¡æ„Ÿè°¢ä½ çš„è´¡çŒ®ï¼ç¥ä½ èŠ‚æ—¥å¿«ä¹ï¼ğŸ…' : 'Thanks again â€” happy holidays! ğŸ…'}</p>
                        </div>
                    </div>
                </div>
            );
	        };

		        // --- Component: StarPromptBanner ---
		        // Lightweight, non-intrusive "please star" banner shown after first successful icon copy.
		        const StarPromptBanner = ({ isVisible, repoUrl, onClose }) => {
		            const { t } = useContext(I18nContext);
		            if (!isVisible) return null;

		            return (
		                <div className="mb-6 animate-slideIn">
		                    <div className="glass-panel rounded-2xl px-4 py-3 border border-slate-700/50 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3">
		                        <div className="flex items-center gap-3">
		                            <div className="w-9 h-9 rounded-xl bg-yellow-500/15 text-yellow-200 flex items-center justify-center shrink-0 border border-yellow-400/20">
		                                <i className="ph ph-star-four text-xl"></i>
		                            </div>
		                            <div className="text-slate-200 text-sm leading-relaxed">
		                                {t('starPrompt.message')}
		                            </div>
		                        </div>

		                        <div className="flex items-center gap-2">
		                            <a
		                                href={repoUrl}
		                                target="_blank"
		                                rel="noopener noreferrer"
		                                onClick={onClose}
		                                className="inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-slate-800/40 hover:bg-slate-700/60 border border-yellow-400/25 text-yellow-100 text-sm font-semibold transition-colors"
		                            >
		                                <i className="ph ph-star text-lg"></i>
		                                {t('starPrompt.cta')}
		                            </a>
		                            <button
		                                type="button"
		                                onClick={onClose}
		                                className="app-tooltip w-10 h-10 inline-flex items-center justify-center rounded-xl bg-slate-800/30 hover:bg-slate-700/50 border border-slate-700/60 text-slate-200 transition-colors"
		                                aria-label={t('tooltip.close')}
		                                data-tooltip={t('tooltip.close')}
		                            >
		                                <i className="ph ph-x text-lg"></i>
		                            </button>
		                        </div>
		                    </div>
		                </div>
		            );
		        };

			        // --- Component: PaginationBar ---
const PaginationBar = ({ page, totalPages, onPageChange }) => {
    const { t } = useContext(I18nContext);
    if (!totalPages || totalPages <= 1) return null;

    const clamp = (n) => Math.min(Math.max(1, n), totalPages);

    const pages = (() => {
        const maxButtons = 7;
        if (totalPages <= maxButtons) return Array.from({ length: totalPages }, (_, i) => i + 1);

        const windowSize = 1;
        const items = [1];
        const start = Math.max(2, page - windowSize);
        const end = Math.min(totalPages - 1, page + windowSize);
        if (start > 2) items.push('â€¦');
        for (let i = start; i <= end; i++) items.push(i);
        if (end < totalPages - 1) items.push('â€¦');
        items.push(totalPages);
        return items;
    })();

    return (
        <div className="mb-6 flex flex-col sm:flex-row sm:items-center justify-between gap-3 animate-slideIn">
            <div className="text-sm text-slate-300">
                {t('pagination.page', { current: page, total: totalPages })}
            </div>

            <div className="flex items-center gap-2">
                <button
                    type="button"
                    disabled={page <= 1}
                    onClick={() => onPageChange(clamp(page - 1))}
                    className="app-tooltip w-10 h-10 inline-flex items-center justify-center rounded-xl bg-slate-800/40 hover:bg-slate-700/60 border border-slate-700/60 text-slate-200 transition-colors disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-slate-800/40"
                    aria-label={t('pagination.prev')}
                    data-tooltip={t('pagination.prev')}
                >
                    <i className="ph ph-caret-left text-lg"></i>
                </button>

                {pages.map((p, idx) =>
                    typeof p === 'number' ? (
                        <button
                            key={p}
                            type="button"
                            onClick={() => onPageChange(clamp(p))}
                            className={`app-tooltip w-10 h-10 inline-flex items-center justify-center rounded-xl border transition-colors ${
                                p === page
                                    ? 'bg-gradient-to-r from-green-600/80 to-emerald-600/80 border-green-400/30 text-white'
                                    : 'bg-slate-800/30 hover:bg-slate-700/50 border-slate-700/60 text-slate-200'
                            }`}
                            aria-label={t('pagination.pageNum', { page: p })}
                            data-tooltip={t('pagination.pageNum', { page: p })}
                        >
                            <span className="text-sm font-semibold">{p}</span>
                        </button>
                    ) : (
                        <span key={`ellipsis-${idx}`} className="px-1 text-slate-500 select-none">â€¦</span>
                    )
                )}

                <button
                    type="button"
                    disabled={page >= totalPages}
                    onClick={() => onPageChange(clamp(page + 1))}
                    className="app-tooltip w-10 h-10 inline-flex items-center justify-center rounded-xl bg-slate-800/40 hover:bg-slate-700/60 border border-slate-700/60 text-slate-200 transition-colors disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-slate-800/40"
                    aria-label={t('pagination.next')}
                    data-tooltip={t('pagination.next')}
                >
                    <i className="ph ph-caret-right text-lg"></i>
                </button>
            </div>
        </div>
    );
};

// --- Main App Component ---
			        const App = () => {
			            const REPO_URL = 'https://github.com/kangchainx/github-christmas-kit';
			            const REPO_HOME_URL = 'https://kangchainx.github.io/github-christmas-kit';
			            const ICONS_REPO_URL = 'https://github.com/kangchainx/github-christmas-kit/tree/main/assets/svg';
			            const ICONS_BASE_URL = 'https://kangchainx.github.io/github-christmas-kit/assets/svg/';

		            const [lang, setLang] = useState(() => {
		                try {
		                    const stored = localStorage.getItem('gck_lang');
		                    if (stored === 'en' || stored === 'zh') return stored;
		                } catch {}

		                const preferred = (navigator.languages?.[0] || navigator.language || 'en').toLowerCase();
		                return preferred.startsWith('zh') ? 'zh' : 'en';
		            });

		            useEffect(() => {
		                try {
		                    localStorage.setItem('gck_lang', lang);
		                } catch {}
		                document.documentElement.lang = lang === 'zh' ? 'zh-CN' : 'en';
		            }, [lang]);

		            const t = useCallback(
		                (key, vars) => {
		                    const template = getI18nValue(lang, key) ?? getI18nValue('en', key) ?? key;
		                    return vars ? formatTemplate(template, vars) : template;
		                },
		                [lang]
		            );

		            const i18n = useMemo(() => ({ lang, setLang, t }), [lang, t]);

			            const [view, setView] = useState('home'); // 'home' | 'guide'
			            const [searchQuery, setSearchQuery] = useState('');
							const [page, setPage] = useState(1);
			            const [isUsageOpen, setIsUsageOpen] = useState(true);
			            const [toast, setToast] = useState({ show: false, msg: '', type: 'success' });
			            const [isStarPromptVisible, setIsStarPromptVisible] = useState(false);
			            const starPromptTriggeredRef = useRef(false);


			            const [icons, setIcons] = useState(() => FALLBACK_ICON_MANIFEST);

			            useEffect(() => {
			                if (location.protocol === 'file:') return;
			                const controller = new AbortController();
			                (async () => {
			                    try {
			                        const res = await fetch(ICONS_MANIFEST_URL, { cache: 'no-store', signal: controller.signal });
			                        if (!res.ok) return;
			                        const data = await res.json();
			                        const list = Array.isArray(data) ? data : (Array.isArray(data?.icons) ? data.icons : null);
			                        if (!list) return;
			                        const cleaned = list
			                            .filter((item) => item && typeof item.name === 'string')
			                            .map((item) => ({
			                                id: typeof item.id === 'string' && item.id ? item.id : item.name,
			                                name: item.name,
			                                labels: item.labels && typeof item.labels === 'object' ? item.labels : undefined,
			                            }));
			                        if (cleaned.length) setIcons(cleaned);
			                    } catch {}
			                })();
			                return () => controller.abort();
			            }, []);
			            							useEffect(() => {
							    setPage(1);
							}, [searchQuery]);

const filteredIcons = useMemo(() => {
			                const query = searchQuery.trim().toLowerCase();
			                if (!query) return icons;
			                return icons.filter((icon) => {
			                    const enLabel = icon.labels?.en || getI18nValue('en', `icons.${icon.id}`) || '';
			                    const zhLabel = icon.labels?.zh || getI18nValue('zh', `icons.${icon.id}`) || '';
			                    const haystack = `${icon.id} ${icon.name} ${enLabel} ${zhLabel}`.toLowerCase();
			                    return haystack.includes(query);
			                });
			            }, [searchQuery, icons]);


const ITEMS_PER_PAGE = 12;
const totalPages = Math.max(1, Math.ceil(filteredIcons.length / ITEMS_PER_PAGE));
const safePage = Math.min(Math.max(1, page), totalPages);

const paginatedIcons = useMemo(() => {
    const start = (safePage - 1) * ITEMS_PER_PAGE;
    return filteredIcons.slice(start, start + ITEMS_PER_PAGE);
}, [filteredIcons, safePage]);

			            const showToast = (msg, type = 'success') => {
			                setToast({ show: true, msg, type });
			                setTimeout(() => setToast((prev) => ({ ...prev, show: false })), 3000);
			            };

			            const triggerStarPrompt = useCallback(() => {
			                if (starPromptTriggeredRef.current) return;

			                const STAR_PROMPT_STORAGE_KEY = 'gck_star_prompt_until';
			                const STAR_PROMPT_COOLDOWN_MS = 1 * 24 * 60 * 60 * 1000;
			                const now = Date.now();

			                let onCooldown = false;
			                try {
			                    const untilRaw = localStorage.getItem(STAR_PROMPT_STORAGE_KEY);
			                    const until = untilRaw ? Number(untilRaw) : 0;
			                    if (Number.isFinite(until) && until > now) onCooldown = true;
			                } catch {}

			                starPromptTriggeredRef.current = true;
			                if (onCooldown) return;

			                try {
			                    localStorage.setItem(STAR_PROMPT_STORAGE_KEY, String(now + STAR_PROMPT_COOLDOWN_MS));
			                } catch {}

			                setIsStarPromptVisible(true);
			            }, []);

			            const dismissStarPrompt = useCallback(() => setIsStarPromptVisible(false), []);

			            const scrollToTop = () => window.scrollTo({ top: 0, behavior: 'smooth' });

		            const handleNavigate = (newView) => {
		                setView(newView);
		                scrollToTop();
		            };

		            return (
		                <I18nContext.Provider value={i18n}>
		                    <div className="relative min-h-screen">
		                        <SnowEffect />
		                        <ClickCheerEffect />

		                        {/* Background Gradient Mesh */}
		                        <div className="fixed inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(30,58,138,0.15),transparent_70%)] pointer-events-none" />

		                        {/* Main Content */}
		                        <div className="relative z-10 max-w-6xl mx-auto px-4 pt-12 md:pt-20">
		                            {view === 'home' ? (
		                                <>
		                                    {/* Header */}
		                                    <div className="text-center mb-16 animate-slideIn">
		                                        <h1 className="text-4xl md:text-6xl font-bold text-white mb-6 drop-shadow-xl tracking-tight">
		                                            GitHub
		                                            <span className="inline-block align-middle mx-3 -mt-1 md:-mt-2 text-3xl md:text-4xl animate-float cursor-default select-none drop-shadow-[0_0_12px_rgba(255,255,255,0.35)]">
		                                                ğŸ„
		                                            </span>
		                                            <span className="text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-red-600">
		                                                Christmas
		                                            </span>{' '}
		                                            <span className="relative inline-block">
		                                                <img
		                                                    src="assets/svg/santa-hat.svg"
		                                                    alt=""
		                                                    aria-hidden="true"
		                                                    className="pointer-events-none select-none absolute left-0 top-0 z-10 w-12 h-12 md:w-14 md:h-14 drop-shadow-[0_10px_22px_rgba(0,0,0,0.55)]"
		                                                    style={{ transform: 'translate(-55%, -65%) rotate(-22deg)' }}
		                                                />
		                                                Kit
		                                            </span>
		                                        </h1>

		                                        <p className="text-lg text-slate-300 max-w-2xl mx-auto mb-1 leading-relaxed">
		                                            {t('header.desc')}
		                                            <br />
		                                            <span className="text-slate-400 text-base">{t('header.disclaimer')}</span>
		                                        </p>

			                                        <div className="mt-3 flex flex-col items-center gap-3">
				                                            <span
				                                                className="app-tooltip inline-flex items-center overflow-hidden rounded-xl bg-slate-800/10 px-3 py-1"
				                                                aria-label={t('tooltip.visitors')}
				                                                data-tooltip={t('tooltip.visitors')}
				                                            >
			                                                <img
			                                                    src="https://visitor-badge.laobi.icu/badge?page_id=kangchainx.github-christmas-kit&style=flat-square&left_color=%2322c55e&right_color=%23ef4444"
			                                                    alt={t('tooltip.visitors')}
			                                                    className="h-6 w-auto opacity-90"
			                                                    loading="lazy"
			                                                />
			                                            </span>
			
			                                            <div className="flex flex-wrap items-center justify-center gap-3">
			                                                <button
			                                                    type="button"
			                                                    onClick={() => setLang((prev) => (prev === 'zh' ? 'en' : 'zh'))}
			                                                    className="app-tooltip inline-flex items-center gap-2 px-4 py-2 rounded-full bg-slate-800/40 hover:bg-slate-700/60 border border-slate-700/60 text-slate-200 transition-colors active:scale-[0.99]"
			                                                    aria-label={t('tooltip.toggleLang')}
			                                                    data-tooltip={t('tooltip.toggleLang')}
			                                                >
			                                                    <i className="ph ph-translate text-lg"></i>
			                                                    <span className="text-sm font-medium">{lang === 'zh' ? 'ä¸­æ–‡' : 'EN'}</span>
			                                                </button>
			
			                                                <a
			                                                    href={REPO_URL}
			                                                    target="_blank"
			                                                    rel="noreferrer"
			                                                    className="app-tooltip inline-flex items-center justify-center w-11 h-11 rounded-full bg-slate-800/40 hover:bg-slate-700/60 border border-slate-700/60 text-slate-200 transition-colors"
			                                                    aria-label={t('tooltip.github')}
			                                                    data-tooltip={t('tooltip.github')}
			                                                >
			                                                    <i className="ph ph-github-logo text-xl"></i>
			                                                </a>
			
			                                                <button
			                                                    type="button"
			                                                    onClick={() => handleNavigate('guide')}
			                                                    className="app-tooltip inline-flex items-center justify-center w-11 h-11 rounded-full bg-slate-800/40 hover:bg-slate-700/60 border border-slate-700/60 text-slate-200 transition-colors"
			                                                    aria-label={t('tooltip.guide')}
			                                                    data-tooltip={t('tooltip.guide')}
			                                                >
			                                                    <i className="ph ph-book-open text-xl"></i>
			                                                </button>
			                                            </div>
			                                        </div>
		                                    </div>

		                                    {/* Search / Filter */}
		                                    <div className="max-w-2xl mx-auto mb-10 animate-slideIn">
		                                        <div className="flex items-center gap-3">
		                                            <div className="glass-panel flex-1 rounded-2xl p-2 border border-slate-700/50 flex items-center gap-2">
		                                                <i className="ph ph-magnifying-glass text-slate-400 text-lg ml-2"></i>
		                                                <input
		                                                    value={searchQuery}
		                                                    onChange={(e) => setSearchQuery(e.target.value)}
		                                                    className="flex-1 bg-transparent text-slate-200 placeholder:text-slate-500 text-sm py-2 px-1 outline-none"
		                                                    placeholder={t('search.placeholder')}
		                                                    aria-label={t('search.placeholder')}
		                                                />
		                                                {searchQuery.trim() !== '' && (
		                                                    <button
		                                                        type="button"
		                                                        onClick={() => setSearchQuery('')}
		                                                        className="app-tooltip p-2 rounded-full text-slate-400 hover:text-white hover:bg-white/10 transition-colors"
		                                                        aria-label={t('search.clear')}
		                                                        data-tooltip={t('search.clear')}
		                                                    >
		                                                        <i className="ph ph-x text-lg"></i>
		                                                    </button>
		                                                )}
		                                            </div>
		                                            <button
		                                                type="button"
		                                                onClick={() => setIsUsageOpen(true)}
		                                                className="app-tooltip inline-flex items-center justify-center w-11 h-11 rounded-full bg-slate-800/40 hover:bg-slate-700/60 border border-slate-700/60 text-slate-200 transition-colors"
		                                                aria-label={t('tooltip.help')}
		                                                data-tooltip={t('tooltip.help')}
		                                            >
		                                                <i className="ph ph-info text-xl"></i>
		                                            </button>
			                                        </div>
			                                    </div>

			                                    <StarPromptBanner isVisible={isStarPromptVisible} repoUrl={REPO_URL} onClose={dismissStarPrompt} />

											<PaginationBar page={safePage} totalPages={totalPages} onPageChange={setPage} />

			                                    {/* Icon Grid */}
			                                    <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-16 animate-slideIn">
			                                        {filteredIcons.length ? (
			                                            paginatedIcons.map((icon) => (
			                                                <IconCard
			                                                    key={icon.id}
			                                                    icon={icon}
			                                                    baseUrl={ICONS_BASE_URL}
			                                                    repoHomeUrl={REPO_HOME_URL}
			                                                    onCopy={showToast}
			                                                    onCopySuccess={triggerStarPrompt}
			                                                />
			                                            ))
			                                        ) : (
			                                            <div className="col-span-full text-center text-slate-400 py-12">
			                                                {t('search.empty')}
		                                            </div>
		                                        )}
		                                    </div>

		                                    {/* Contributor Lab */}
		                                    <div className="animate-slideIn">
		                                        <LabSection onCopy={showToast} />
		                                    </div>

		                                    {/* Footer */}
		                                    <footer className="mt-20 pb-12 animate-slideIn">
		                                        <CornerNotes repoUrl={REPO_URL} />
		                                    </footer>
		                                </>
		                            ) : (
		                                <ContributingGuide onBack={() => handleNavigate('home')} onCopy={showToast} />
		                            )}
		                        </div>

			                        <UsageModal
			                            isOpen={isUsageOpen}
			                            onClose={() => setIsUsageOpen(false)}
		                            baseUrl={ICONS_BASE_URL}
		                            repoUrl={ICONS_REPO_URL}
		                        />
		                        <Toast isVisible={toast.show} message={toast.msg} type={toast.type} />
		                    </div>
		                </I18nContext.Provider>
		            );
		        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
	</body>
	</html>
